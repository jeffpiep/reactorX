
'RIPOFF OF GRAVATAR: RED PLANET 3
DATA player() byte =0,0,0,$3C,$66,$42,$42,$66,$3C,0,0,0
DIM X(4),Y(4)

GR.8:GR.5:POKE 752,1
gr.7

'PM COORDINATES
'MIN X=48  $30
'MAX X=200 $C8
'MIN Y=16  $10
'MAX Y=100 $64

PM=$AC00
MOVE ADR(player),PM,12
POKE 704,15
POKE 54279,PM/256:'             Tell ANTIC where PM RAM is
POKE 53277,3:'                     Enable PM display
POKE 559,46:'                    Enable PM DMA with 2-line res


'8 LEVELS
'5 LIVES
'FIRE TO START
' IF HIT WALL, LOSE LIFE. IF 0 LIVES, PRINT "SCORE" AND "TRY AGAIN" - RESET SHIP. RESET LIVES. JUMP TO START
' IF HIT THE CORE, SCORE!, ADVANCE LEVEL. HAVE TO RESET THE SHIP.
' IF LEVELS COMPLETE, PRINT "YOU WON! SCORE" - RESET SHIP. RESET LIVES. JUMP BACK TO FIRE TO START.
SC=1000:LEVEL=0:NL=3
X(0)=-20:Y(0)=0
X0=100
Y0=50
COLOR 1
PLOT X0/2,Y0+20 : DRAWTO X0/2+20,Y0 :   DRAWTO X0/2,Y0-20 :  DRAWTO X0/2-20,Y0 :  DRAWTO X0/2,Y0+20

?SGN(-11/20)

WHILE NL

' really inefficient way to do this
'MOVE PM+$200,PM+$201,127
MOVE PM,PM+$200+Y(0)+Y0,12
POKE 53248,X(0)+X0

X(0)=X(0) +SGN(Y(0)) + RAND(5)-2 -SGN(X(0)/20)
Y(0)=Y(0) -SGN(X(0)) + RAND(5)-2 -SGN(Y(0)/20)

S=STICK(0)
LR=(S&4=4)-(S&8=8)
UD=(S&1=1)-(S&2=2)


POKE 53278,1:PAUSE1
P0PF=PEEK(53252)
IF P0PF
ENDIF
SOUND
SC=SC-1
WEND
?,"SCORE:";SC
SOUND
